{
  "test_scenarios": [
    {
      "id": "basic_narration",
      "name": "Basic Narration Test",
      "category": "fundamental",
      "prompt": "Describe the entrance to an ancient dwarven fortress.",
      "expected_response": {
        "has_narration": true,
        "actions_count": 0,
        "validation": "Should contain descriptive text with no actions"
      }
    },
    {
      "id": "damage_update",
      "name": "Character Damage Update",
      "category": "character_management",
      "prompt": "A falling rock trap triggers and hits Norn for 8 damage. He currently has 45 hit points.",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["updateCharacterInfo"],
        "expected_parameters": {
          "characterName": "Norn",
          "changes": "{\"hitPoints\": 37}"
        }
      }
    },
    {
      "id": "inventory_add",
      "name": "Add Item to Inventory",
      "category": "character_management",
      "prompt": "Norn finds a healing potion in the chest and adds it to his inventory.",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["updateCharacterInfo"],
        "expected_parameters": {
          "characterName": "Norn",
          "changes": "{\"inventory\": {\"add\": [\"Healing Potion\"]}}"
        }
      }
    },
    {
      "id": "location_transition",
      "name": "Valid Location Movement",
      "category": "movement",
      "prompt": "The party moves from the Entrance Hall (A01) to the Guard Room (A02).",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["transitionLocation"],
        "expected_parameters": {
          "newLocation": "A02"
        }
      }
    },
    {
      "id": "invalid_location",
      "name": "Invalid Location Request",
      "category": "movement",
      "prompt": "The party wants to teleport directly to the treasure room (Z99) which doesn't exist nearby.",
      "expected_response": {
        "has_narration": true,
        "actions_count": 0,
        "validation": "Should explain why movement is not possible"
      }
    },
    {
      "id": "short_rest",
      "name": "Short Rest Time Update",
      "category": "time_management",
      "prompt": "The party takes a short rest for one hour to recover.",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["updateTime"],
        "expected_parameters": {
          "timeEstimate": "60"
        },
        "optional_actions": ["updateCharacterInfo"]
      }
    },
    {
      "id": "combat_initiation",
      "name": "Start Combat Encounter",
      "category": "combat",
      "prompt": "Three goblins suddenly emerge from the shadows and attack the party!",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["createEncounter"],
        "validation": "Should create encounter with appropriate monsters"
      }
    },
    {
      "id": "plot_discovery",
      "name": "Plot Point Discovery",
      "category": "story",
      "prompt": "The party discovers the hidden journal mentioned in plot point PLOT001, revealing the location of the ancient artifact.",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["updatePlot"],
        "expected_parameters": {
          "plotPointId": "PLOT001",
          "newStatus": "discovered"
        }
      }
    },
    {
      "id": "npc_join",
      "name": "NPC Joins Party",
      "category": "party_management",
      "prompt": "Elara, a level 5 elf ranger, agrees to join the party on their quest.",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["updatePartyNPCs"],
        "expected_parameters": {
          "operation": "add",
          "npc": {
            "name": "Elara",
            "race": "Elf",
            "class": "Ranger",
            "level": 5
          }
        }
      }
    },
    {
      "id": "level_up_trigger",
      "name": "Level Up Initiation",
      "category": "character_management",
      "prompt": "Norn has reached 14,000 experience points and should advance to level 6.",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["levelUp"],
        "expected_parameters": {
          "entityName": "Norn",
          "newLevel": 6
        }
      }
    },
    {
      "id": "storage_store",
      "name": "Store Item in Storage",
      "category": "storage",
      "prompt": "Norn wants to store his spare shield in the party's storage chest at the inn.",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["storageInteraction"],
        "expected_parameters": {
          "description": "store spare shield in party storage chest",
          "characterName": "Norn"
        }
      }
    },
    {
      "id": "establish_base",
      "name": "Establish Hub Location",
      "category": "campaign",
      "prompt": "The party decides to make the abandoned Silver Swan Inn their permanent base of operations.",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["establishHub"],
        "expected_parameters": {
          "hubName": "The Silver Swan Inn",
          "hubType": "tavern"
        }
      }
    },
    {
      "id": "multiple_actions_combat",
      "name": "Complex Combat Resolution",
      "category": "complex",
      "prompt": "Norn defeats the goblin (50 XP), takes 5 damage, finds 15 gold pieces, and the combat lasted 3 minutes.",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["updateCharacterInfo", "updateTime"],
        "minimum_actions": 2,
        "validation": "Should update XP, HP, gold, and time"
      }
    },
    {
      "id": "exploration_sequence",
      "name": "Exploration with Multiple Updates",
      "category": "complex",
      "prompt": "The party searches the room for 20 minutes, Gilly finds a secret door leading to area B01, and marks the discovery of the hidden passage (PLOT002).",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["updateTime", "updatePlot"],
        "optional_actions": ["transitionLocation"],
        "minimum_actions": 2
      }
    },
    {
      "id": "module_creation",
      "name": "Create New Module",
      "category": "campaign",
      "prompt": "Create a new adventure module about exploring a haunted lighthouse on a cliff overlooking the sea, suitable for level 6-8 characters.",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["createNewModule"],
        "expected_parameters": {
          "narrative": "haunted lighthouse on a cliff overlooking the sea, suitable for level 6-8 characters"
        }
      }
    },
    {
      "id": "exit_session",
      "name": "End Game Session",
      "category": "session",
      "prompt": "The party decides to rest at the inn and end today's adventure session.",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["exitGame"],
        "expected_parameters": {}
      }
    },
    {
      "id": "spell_slot_usage",
      "name": "Spell Slot Management",
      "category": "character_management",
      "prompt": "Norn casts Cure Wounds using one of his 1st level spell slots. He has 3 slots remaining.",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["updateCharacterInfo"],
        "validation": "Should update spell slots appropriately"
      }
    },
    {
      "id": "condition_application",
      "name": "Apply Character Condition",
      "category": "character_management",
      "prompt": "The poison trap affects Gilly, giving her the poisoned condition.",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["updateCharacterInfo"],
        "expected_parameters": {
          "characterName": "Gilly",
          "changes": "{\"conditions\": {\"add\": [\"poisoned\"]}}"
        }
      }
    },
    {
      "id": "long_rest_recovery",
      "name": "Long Rest Full Recovery",
      "category": "complex",
      "prompt": "The party takes a long rest at the inn for 8 hours. Everyone recovers all hit points and spell slots.",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["updateTime", "updateCharacterInfo"],
        "minimum_actions": 2,
        "validation": "Should update time by 480 minutes and restore resources"
      }
    },
    {
      "id": "trap_trigger_complex",
      "name": "Complex Trap Scenario",
      "category": "complex",
      "prompt": "Norn triggers a dart trap while searching. He takes 6 damage, and the noise alerts two skeleton guards in the next room who begin moving toward the party. This takes about 2 minutes.",
      "expected_response": {
        "has_narration": true,
        "required_actions": ["updateCharacterInfo", "updateTime"],
        "optional_actions": ["createEncounter"],
        "minimum_actions": 2,
        "validation": "Should handle damage, time, and potential combat setup"
      }
    }
  ],
  "validation_rules": {
    "response_format": {
      "must_be_json": true,
      "required_fields": ["narration", "actions"],
      "narration_type": "string",
      "actions_type": "array"
    },
    "action_format": {
      "required_fields": ["action", "parameters"],
      "action_type": "string",
      "parameters_type": "object"
    },
    "valid_action_types": [
      "updateCharacterInfo",
      "transitionLocation",
      "createEncounter",
      "updateEncounter",
      "updatePlot",
      "updateTime",
      "levelUp",
      "updatePartyNPCs",
      "updatePartyTracker",
      "createNewModule",
      "establishHub",
      "storageInteraction",
      "exitGame"
    ],
    "content_rules": {
      "no_unicode": true,
      "no_undefined_locations": true,
      "maintain_game_state": true
    }
  },
  "test_categories": {
    "fundamental": "Basic response format and narration tests",
    "character_management": "Character stats, inventory, and condition updates",
    "movement": "Location transitions and path validation",
    "time_management": "World time updates and rest mechanics",
    "combat": "Combat encounter creation and management",
    "story": "Plot progression and narrative updates",
    "party_management": "NPC additions and party composition",
    "storage": "Item storage system interactions",
    "campaign": "Module creation and hub establishment",
    "session": "Game session management",
    "complex": "Multi-action scenarios requiring coordination"
  }
}